<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.82.0" />
    <meta name="description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta name="twitter:image" content="https://devdocs.prestashop.com/images/social-cover.jpg" />
<meta name="twitter:site" content="@prestashop" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="How to handle multi lang Doctrine entity" />
<meta name="twitter:description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta property="og:image" content="https://devdocs.prestashop.com/images/social-cover.jpg" />
<meta property="og:site_name" content="PrestaShop" />
<meta property="og:title" content="How to handle multi lang Doctrine entity" />
<meta property="og:description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta name="author" content="PrestaShop">

    <link rel="icon" href="/images/preston-logo@2x.png" type="image/png">

    <title>How to handle multi lang Doctrine entity :: PrestaShop Developer Documentation</title>

    
    <link href="/css/font-awesome.min.css?1627507034" rel="stylesheet">
    <link href="/css/syntax-github.css?1627507034" rel="stylesheet">
    <link href="/css/featherlight.min.css?1627507034" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1627507034" rel="stylesheet">
    <link href="/css/auto-complete.css?1627507034" rel="stylesheet">
    
    <link href="/style.css?1627507034" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700" rel="stylesheet">

    <script src="/js/jquery-3.3.1.min.js?1627507034"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

  </head>
  <body class="" data-url="/1.7/modules/concepts/doctrine/how-to-handle-multi-lang-doctrine-entity/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">PrestaShop DevDocs</a>

    </div>
    
        <div class="searchbox-extended">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input id="search-by" type="search" placeholder="Search...">
</div>


    
  </div>

    <div class="highlightable">
    <ul class="topics">

      
        
      
    </ul>

    
    

    
    <section id="footer">
      <p><a href="https://github.com/PrestaShop/PrestaShop/"><i class="fa fa-github" aria-hidden="true"></i> PrestaShop on GitHub</a></p>
<p><a href="https://github.com/PrestaShop/PrestaShop/issues"><i class="fa fa-bug" aria-hidden="true"></i> Report a bug</a></p>
<p><a href="https://www.prestashop-project.org/slack/readme/"><i class="fa fa-comment" aria-hidden="true"></i> Join us on Slack</a></p>

    </section>
  </div>
</nav>





      <section id="body">
      <div id="overlay"></div>
      <div class="padding highlightable">
        
<div>
  <div id="top-bar">
    
      
      
      
      <div id="top-github-link">
        <a class="github-link" title='Improve this page' href="https://github.com/PrestaShop/docs/edit/master/src/content/1.7/modules/concepts/doctrine/how-to-handle-multi-lang-doctrine-entity.md" target="blank">
          <i class="fa fa-pencil"></i>
          <span id="top-github-link-text">Improve this page</span>
        </a>
        <a class="how-to-improve" href="/1.7/contribute/documentation/how/">
          <i class="fa fa-question-circle"></i>
          <span>How</span>
        </a>
      </div>
      
    
    <div id="breadcrumbs" itemscope="" itemtype="http://schema.org/breadcrumb">
      <span id="sidebar-toggle-span">
        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
          <i class="fa fa-bars"></i>
        </a>
      </span>
      <span class="links">
        
            
            
              
              
            
            
              
              
            
            
              
              
            
            
              
              
            
            
              
              
            
            
              <a href='/'>Home</a> > <a href='/1.7/'>PrestaShop 1.7</a> > <a href='/1.7/modules/'>Modules</a> > <a href='/1.7/modules/concepts/'>Extension concepts</a> > <a href='/1.7/modules/concepts/doctrine/'>Doctrine</a> > Multi Lang Entity
            
          
            
          
            
          
            
          
            
          
            
          
      </span>
    </div>
  </div>
</div>




        

        
        
          
            <div id="toc">
  <div class="wrapper">
    <div id="toc-title">Table of Contents</div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#how-to-handle-multi-lang-doctrine-entity">How to handle multi lang Doctrine entity</a>
      <ul>
        <li><a href="#multi-lang-fields-in-prestashop">Multi lang fields in PrestaShop</a></li>
        <li><a href="#define-your-entities">Define your entities</a>
          <ul>
            <li><a href="#quote-entity">Quote entity</a></li>
            <li><a href="#quotelang-entity">QuoteLang Entity</a></li>
          </ul>
        </li>
        <li><a href="#create-a-translated-entity">Create a translated entity</a></li>
        <li><a href="#fetching-your-multi-lang-entity">Fetching your multi lang entity</a>
          <ul>
            <li><a href="#creating-your-repository-service">Creating your repository service</a></li>
            <li><a href="#using-the-repository-to-get-entities-relying-on-doctrine-query-builder">Using the repository to get entities relying on Doctrine query builder</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>

    <div id="navigation">
  
  

  

  
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
        
      
      
      
      
      

      
        
    
    
      
        
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
    
  

  
  
  <a class="nav nav-next" href="/1.7/modules/concepts/overrides/" title="Overrides" style="margin-right: 0px;">
    <i class="fa fa-chevron-right"></i>
    Next article
  </a>
  
</div>

  </div>
</div>

          
        

        <div id="body-inner">

          




<h1 id="how-to-handle-multi-lang-doctrine-entity">How to handle multi lang Doctrine entity</h1>

<div class="magic-version-pill" data-version="1.7.7" data-title="New in PrestaShop 1.7.7"></div>


<h2 id="multi-lang-fields-in-prestashop">Multi lang fields in PrestaShop</h2>
<p>A common use case in a CMS (Content Management System) is to handle translatable fields (or multi lang fields). In the legacy model of PrestaShop this is managed via an automatic mechanism and some configuration
in the ObjectModel, thus all translatable fields are stored in a dedicated table. Let&rsquo;s say you have a <code>quote</code> table then its translatable fields will be stored in a <code>quote_lang</code> each
row being an association between a <code>quote</code> row and a <code>lang</code> row (containing the languages installed on a PrestaShop shop).</p>
<p>We are going to use the same strategy here so that developers used to legacy objects will be able to understand the database structure easily as it follows the same architecture. It could
also be useful if you want to create a Doctrine entity compatible with a legacy ObjectModel, the structure will remain the same so you could access/edit the data with two different Data layers.</p>

<div class="notices note" ><p><strong>What about doctrine plugins?</strong></p>
<p>There are several Doctrine plugins which allows to handle multi lang fields easily but for now no solution has been integrated in PrestaShop, so you will have to handle it &ldquo;manually&rdquo;.</p>
</div>


<div class="notices note" ><strong>Namespace and autoload</strong>
The content of this documentation relies on <strong>namespaces</strong> which need to be defined in your module&rsquo;s autoload, we won&rsquo;t cover this part here if you need more information please read <a href="/1.7/modules/concepts/composer/#setup-composer-in-a-module">how to setup composer in a module</a></div>


<div class="notices tip" ><p><strong>Example module</strong>
All the content of this documentation can be found in this <a href="https://github.com/PrestaShop/example-modules/tree/master/demodoctrine">Doctrine example module</a> which covers all the content of this page and more:</p>
<ul>
<li>Multi lang entities</li>
<li>Doctrine repositories</li>
<li>Form handling</li>
<li>Grid listing</li>
<li>Symfony controller</li>
<li>Symfony Services</li>
</ul>
</div>

<h2 id="define-your-entities">Define your entities</h2>
<p>This example will be based on an example of quotes from various authors that need to be translated (so that it matches the user&rsquo;s language), these quotes can then be randomly be displayed on the Frontend.</p>
<h3 id="quote-entity">Quote entity</h3>
<p>This is the base entity, it contains:</p>
<ul>
<li>the author name (no need to translate it)</li>
<li>a collection of <code>QuoteLang</code> which contains all the translatable fields using a <a href="https://www.doctrine-project.org/projects/doctrine-orm/en/2.7/reference/association-mapping.html#one-to-many-bidirectional">OneToMany Bidirectional relation</a></li>
<li>the dates of creation and updates (which rely on <a href="https://symfony.com/doc/3.4/doctrine/lifecycle_callbacks.html">Doctrine lifecycle callbacks</a> to be filled automatically)</li>
<li>the definition of the associated repository <code>PrestaShop\Module\DemoDoctrine\Repository\QuoteRepository</code></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="sd">/**
</span><span class="sd"> * Copyright since 2007 PrestaShop SA and Contributors
</span><span class="sd"> * PrestaShop is an International Registered Trademark &amp; Property of PrestaShop SA
</span><span class="sd"> *
</span><span class="sd"> * NOTICE OF LICENSE
</span><span class="sd"> *
</span><span class="sd"> * This source file is subject to the Academic Free License version 3.0
</span><span class="sd"> * that is bundled with this package in the file LICENSE.md.
</span><span class="sd"> * It is also available through the world-wide-web at this URL:
</span><span class="sd"> * https://opensource.org/licenses/AFL-3.0
</span><span class="sd"> * If you did not receive a copy of the license and are unable to
</span><span class="sd"> * obtain it through the world-wide-web, please send an email
</span><span class="sd"> * to license@prestashop.com so we can send you a copy immediately.
</span><span class="sd"> *
</span><span class="sd"> * @author    PrestaShop SA and Contributors &lt;contact@prestashop.com&gt;
</span><span class="sd"> * @copyright Since 2007 PrestaShop SA and Contributors
</span><span class="sd"> * @license   https://opensource.org/licenses/AFL-3.0 Academic Free License version 3.0
</span><span class="sd"> */</span>
<span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>

<span class="k">namespace</span> <span class="nx">PrestaShop\Module\DemoDoctrine\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">DateTime</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\Common\Collections\ArrayCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>

<span class="sd">/**
</span><span class="sd"> * @ORM\Table()
</span><span class="sd"> * @ORM\Entity(repositoryClass=&#34;PrestaShop\Module\DemoDoctrine\Repository\QuoteRepository&#34;)
</span><span class="sd"> * @ORM\HasLifecycleCallbacks
</span><span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Quote</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * @var int
</span><span class="sd">     *
</span><span class="sd">     * @ORM\Id
</span><span class="sd">     * @ORM\Column(name=&#34;id_quote&#34;, type=&#34;integer&#34;)
</span><span class="sd">     * @ORM\GeneratedValue(strategy=&#34;AUTO&#34;)
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$id</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @var string
</span><span class="sd">     *
</span><span class="sd">     * @ORM\Column(name=&#34;author&#34;, type=&#34;string&#34;, length=255)
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$author</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @ORM\OneToMany(targetEntity=&#34;PrestaShop\Module\DemoDoctrine\Entity\QuoteLang&#34;, cascade={&#34;persist&#34;, &#34;remove&#34;}, mappedBy=&#34;quote&#34;)
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$quoteLangs</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @var DateTime
</span><span class="sd">     *
</span><span class="sd">     * @ORM\Column(name=&#34;date_add&#34;, type=&#34;datetime&#34;)
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$dateAdd</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @var DateTime
</span><span class="sd">     *
</span><span class="sd">     * @ORM\Column(name=&#34;date_upd&#34;, type=&#34;datetime&#34;)
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$dateUpd</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">quoteLangs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayCollection</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @return int
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getId</span><span class="p">()</span><span class="o">:</span> <span class="nx">int</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @return ArrayCollection
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getQuoteLangs</span><span class="p">()</span><span class="o">:</span> <span class="nx">ArrayCollection</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">quoteLangs</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @param int $langId
</span><span class="sd">     * @return QuoteLang|null
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getQuoteLangByLangId</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$langId</span><span class="p">)</span><span class="o">:</span> <span class="o">?</span><span class="nx">QuoteLang</span>
    <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">quoteLangs</span> <span class="k">as</span> <span class="nv">$quoteLang</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$langId</span> <span class="o">===</span> <span class="nv">$quoteLang</span><span class="o">-&gt;</span><span class="na">getLang</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">())</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nv">$quoteLang</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @param QuoteLang $quoteLang
</span><span class="sd">     * @return $this
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">addQuoteLang</span><span class="p">(</span><span class="nx">QuoteLang</span> <span class="nv">$quoteLang</span><span class="p">)</span><span class="o">:</span> <span class="nx">self</span>
    <span class="p">{</span>
        <span class="nv">$quoteLang</span><span class="o">-&gt;</span><span class="na">setQuote</span><span class="p">(</span><span class="nv">$this</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">quoteLangs</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$quoteLang</span><span class="p">);</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @return string
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getQuoteContent</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">quoteLangs</span><span class="o">-&gt;</span><span class="na">count</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nv">$quoteLang</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">quoteLangs</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>

        <span class="k">return</span> <span class="nv">$quoteLang</span><span class="o">-&gt;</span><span class="na">getContent</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @return string
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getAuthor</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">author</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @param string $author
</span><span class="sd">     * @return $this
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setAuthor</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$author</span><span class="p">)</span><span class="o">:</span> <span class="nx">self</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">author</span> <span class="o">=</span> <span class="nv">$author</span><span class="p">;</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * Set dateAdd.
</span><span class="sd">     *
</span><span class="sd">     * @param DateTime $dateAdd
</span><span class="sd">     *
</span><span class="sd">     * @return $this
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setDateAdd</span><span class="p">(</span><span class="nx">DateTime</span> <span class="nv">$dateAdd</span><span class="p">)</span><span class="o">:</span> <span class="nx">self</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dateAdd</span> <span class="o">=</span> <span class="nv">$dateAdd</span><span class="p">;</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * Get dateAdd.
</span><span class="sd">     *
</span><span class="sd">     * @return DateTime
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getDateAdd</span><span class="p">()</span><span class="o">:</span> <span class="nx">DateTime</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dateAdd</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * Set dateUpd.
</span><span class="sd">     *
</span><span class="sd">     * @param DateTime $dateUpd
</span><span class="sd">     *
</span><span class="sd">     * @return $this
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setDateUpd</span><span class="p">(</span><span class="nx">DateTime</span> <span class="nv">$dateUpd</span><span class="p">)</span><span class="o">:</span> <span class="nx">self</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dateUpd</span> <span class="o">=</span> <span class="nv">$dateUpd</span><span class="p">;</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * Get dateUpd.
</span><span class="sd">     *
</span><span class="sd">     * @return DateTime
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getDateUpd</span><span class="p">()</span><span class="o">:</span> <span class="nx">DateTime</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dateUpd</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * Now we tell doctrine that before we persist or update we call the updatedTimestamps() function.
</span><span class="sd">     *
</span><span class="sd">     * @ORM\PrePersist
</span><span class="sd">     * @ORM\PreUpdate
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">updatedTimestamps</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setDateUpd</span><span class="p">(</span><span class="k">new</span> <span class="nx">DateTime</span><span class="p">());</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getDateAdd</span><span class="p">()</span> <span class="o">==</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setDateAdd</span><span class="p">(</span><span class="k">new</span> <span class="nx">DateTime</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="quotelang-entity">QuoteLang Entity</h3>
<p>This entity contains:</p>
<ul>
<li>the translatable fields (in this example only the <code>content</code> of the Quote)</li>
<li>the relationship with the parent quote (since it&rsquo;s bidirectional)</li>
<li>and finally the relationship to the <code>Lang</code> entity (which is a Core entity from PrestaShop) this is what allows to associate the translation to the appropriate language</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="sd">/**
</span><span class="sd"> * Copyright since 2007 PrestaShop SA and Contributors
</span><span class="sd"> * PrestaShop is an International Registered Trademark &amp; Property of PrestaShop SA
</span><span class="sd"> *
</span><span class="sd"> * NOTICE OF LICENSE
</span><span class="sd"> *
</span><span class="sd"> * This source file is subject to the Academic Free License version 3.0
</span><span class="sd"> * that is bundled with this package in the file LICENSE.md.
</span><span class="sd"> * It is also available through the world-wide-web at this URL:
</span><span class="sd"> * https://opensource.org/licenses/AFL-3.0
</span><span class="sd"> * If you did not receive a copy of the license and are unable to
</span><span class="sd"> * obtain it through the world-wide-web, please send an email
</span><span class="sd"> * to license@prestashop.com so we can send you a copy immediately.
</span><span class="sd"> *
</span><span class="sd"> * @author    PrestaShop SA and Contributors &lt;contact@prestashop.com&gt;
</span><span class="sd"> * @copyright Since 2007 PrestaShop SA and Contributors
</span><span class="sd"> * @license   https://opensource.org/licenses/AFL-3.0 Academic Free License version 3.0
</span><span class="sd"> */</span>
<span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>

<span class="k">namespace</span> <span class="nx">PrestaShop\Module\DemoDoctrine\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\Mapping</span> <span class="k">as</span> <span class="nx">ORM</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PrestaShopBundle\Entity\Lang</span><span class="p">;</span>

<span class="sd">/**
</span><span class="sd"> * @ORM\Table()
</span><span class="sd"> * @ORM\Entity()
</span><span class="sd"> */</span>
<span class="k">class</span> <span class="nc">QuoteLang</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * @var Quote
</span><span class="sd">     * @ORM\Id
</span><span class="sd">     * @ORM\ManyToOne(targetEntity=&#34;PrestaShop\Module\DemoDoctrine\Entity\Quote&#34;, inversedBy=&#34;quoteLangs&#34;)
</span><span class="sd">     * @ORM\JoinColumn(name=&#34;id_quote&#34;, referencedColumnName=&#34;id_quote&#34;, nullable=false)
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$quote</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @var Lang
</span><span class="sd">     * @ORM\Id
</span><span class="sd">     * @ORM\ManyToOne(targetEntity=&#34;PrestaShopBundle\Entity\Lang&#34;)
</span><span class="sd">     * @ORM\JoinColumn(name=&#34;id_lang&#34;, referencedColumnName=&#34;id_lang&#34;, nullable=false, onDelete=&#34;CASCADE&#34;)
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$lang</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @var string
</span><span class="sd">     * @ORM\Column(name=&#34;content&#34;, type=&#34;string&#34;, nullable=false)
</span><span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$content</span><span class="p">;</span>

    <span class="sd">/**
</span><span class="sd">     * @return Quote
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getQuote</span><span class="p">()</span><span class="o">:</span> <span class="nx">Quote</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">quote</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @param Quote $quote
</span><span class="sd">     * @return $this
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setQuote</span><span class="p">(</span><span class="nx">Quote</span> <span class="nv">$quote</span><span class="p">)</span><span class="o">:</span> <span class="nx">self</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">quote</span> <span class="o">=</span> <span class="nv">$quote</span><span class="p">;</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @return Lang
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getLang</span><span class="p">()</span><span class="o">:</span> <span class="nx">Lang</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lang</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @param Lang $lang
</span><span class="sd">     * @return $this
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setLang</span><span class="p">(</span><span class="nx">Lang</span> <span class="nv">$lang</span><span class="p">)</span><span class="o">:</span> <span class="nx">self</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lang</span> <span class="o">=</span> <span class="nv">$lang</span><span class="p">;</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @return string
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getContent</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">content</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * @param string $content
</span><span class="sd">     * @return $this
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setContent</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$content</span><span class="p">)</span><span class="o">:</span> <span class="nx">self</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">content</span> <span class="o">=</span> <span class="nv">$content</span><span class="p">;</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="notices tip" ><p><strong>More about Doctrine relations</strong>
If you need more info about how to setup and handle Doctrine relations, you can read the <a href="https://symfony.com/doc/3.4/doctrine/associations.html">Symfony documentation</a> about it.
Focus on the <code>Annotation</code> sections since PrestaShop only handles this kind of configuration from modules' Entities. Here are some additional link that might be useful:</p>
<ul>
<li><a href="https://www.doctrine-project.org/projects/doctrine-orm/en/2.7/reference/association-mapping.html">Doctrine Association mapping</a></li>
<li><a href="https://symfonycasts.com/screencast/symfony3-doctrine-relations">Mastering Doctrine Relationships in Symfony 3 (video tutorial)</a></li>
</ul>
</div>

<h2 id="create-a-translated-entity">Create a translated entity</h2>
<p>We will here display a more basic usage of Doctrine entity manager to create a translated entity:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">use</span> <span class="nx">PrestaShop\Module\DemoDoctrine\Entity\Quote</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PrestaShop\Module\DemoDoctrine\Entity\QuoteLang</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PrestaShopBundle\Entity\Lang</span><span class="p">;</span>

<span class="c1">// Getting the container depends if you are in a module or a controller but the rest of the code remains the same
</span><span class="c1"></span><span class="nv">$container</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getContainer</span><span class="p">();</span>

<span class="c1">// Get all languages vie the Lang repository
</span><span class="c1"></span><span class="nv">$langRepository</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;prestashop.core.admin.lang.repository&#39;</span><span class="p">);</span>
<span class="nv">$languages</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">langRepository</span><span class="o">-&gt;</span><span class="na">findAll</span><span class="p">();</span>

<span class="c1">// The entity manager will allow us to persist the Doctrine entities
</span><span class="c1"></span><span class="nv">$entityManager</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;doctrine.orm.default_entity_manager&#39;</span><span class="p">);</span>

<span class="c1">// This are some fixtures data
</span><span class="c1"></span><span class="nv">$quotesData</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span>
        <span class="s1">&#39;author&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pierre Augustin Caron de Beaumarchais&#39;</span><span class="p">,</span>
        <span class="s1">&#39;quotes&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
          <span class="s1">&#39;en&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Proving that I am right would be admitting that I could be wrong.&#39;</span><span class="p">,</span>
          <span class="s1">&#39;fr&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Prouver que j\&#39;ai raison serait accorder que je puis avoir tort.&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s1">&#39;author&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Georges Bernanos&#39;</span><span class="p">,</span>
        <span class="s1">&#39;quotes&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
          <span class="s1">&#39;en&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;There are no half-truths.&#39;</span><span class="p">,</span>
          <span class="s1">&#39;fr&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Il n\&#39;y a pas de verits moyennes.&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">],</span>
<span class="p">];</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$quotesData</span> <span class="k">as</span> <span class="nv">$quoteData</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$quote</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Quote</span><span class="p">();</span>
    <span class="nv">$quote</span><span class="o">-&gt;</span><span class="na">setAuthor</span><span class="p">(</span><span class="nv">$quoteData</span><span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">]);</span>

    <span class="sd">/** @var Lang $language */</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$languages</span> <span class="k">as</span> <span class="nv">$language</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$quoteLang</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuoteLang</span><span class="p">();</span>
        <span class="nv">$quoteLang</span><span class="o">-&gt;</span><span class="na">setLang</span><span class="p">(</span><span class="nv">$language</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$quoteData</span><span class="p">[</span><span class="s1">&#39;quotes&#39;</span><span class="p">][</span><span class="nv">$language</span><span class="o">-&gt;</span><span class="na">getIsoCode</span><span class="p">()]))</span> <span class="p">{</span>
            <span class="nv">$quoteLang</span><span class="o">-&gt;</span><span class="na">setContent</span><span class="p">(</span><span class="nv">$quoteData</span><span class="p">[</span><span class="s1">&#39;quotes&#39;</span><span class="p">][</span><span class="nv">$language</span><span class="o">-&gt;</span><span class="na">getIsoCode</span><span class="p">()]);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$quoteLang</span><span class="o">-&gt;</span><span class="na">setContent</span><span class="p">(</span><span class="nv">$quoteData</span><span class="p">[</span><span class="s1">&#39;quotes&#39;</span><span class="p">][</span><span class="s1">&#39;en&#39;</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="nv">$quote</span><span class="o">-&gt;</span><span class="na">addQuoteLang</span><span class="p">(</span><span class="nv">$quoteLang</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Usually we should also persist the QuoteLang entities, but since we setup the cascading persist in the Quote
</span><span class="c1"></span>    <span class="c1">// entity it is not necessary here, this action allows the entity manager to be aware of this new entity.
</span><span class="c1"></span>    <span class="nv">$entityManager</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$quote</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Finally the entity manager applies ALL the creation in one go
</span><span class="c1"></span><span class="nv">$entityManager</span><span class="o">-&gt;</span><span class="na">flush</span><span class="p">();</span>
</code></pre></div><h2 id="fetching-your-multi-lang-entity">Fetching your multi lang entity</h2>
<h3 id="creating-your-repository-service">Creating your repository service</h3>
<p>It is more efficient to have a dedicated repository service to handle your entity, as mentioned when creating the <code>Quote</code> entity a repository <code>PrestaShop\Module\DemoDoctrine\Repository\QuoteRepository</code> has been configured and assigned to this entity, this allows the Doctrine entity manager to map them, but we can also define our own service so that we can get it via a service name.</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">services</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">prestashop.module.demodoctrine.repository.quote_repository</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l">PrestaShop\Module\DemoDoctrine\Repository\QuoteRepository</span><span class="w">
</span><span class="w">        </span><span class="nt">factory</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;@doctrine.orm.default_entity_manager&#39;</span><span class="p">,</span><span class="w"> </span><span class="l">getRepository]</span><span class="w">
</span><span class="w">        </span><span class="nt">arguments</span><span class="p">:</span><span class="w">
</span><span class="w">            </span>- <span class="l">PrestaShop\Module\DemoDoctrine\Entity\Quote</span><span class="w">
</span></code></pre></div><p>This will allow to get the Quote repository easily:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="nv">$quoteRepository</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getContainer</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;prestashop.module.demodoctrine.repository.quote_repository&#39;</span><span class="p">);</span>
</code></pre></div><h3 id="using-the-repository-to-get-entities-relying-on-doctrine-query-builder">Using the repository to get entities relying on Doctrine query builder</h3>
<p>Here we get the list of all <code>Quote</code> entities and their associated <code>QuoteLang</code>, it returns all the language by default but we also have a <code>$langId</code> parameter available if only one language is wanted.</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="sd">/**
</span><span class="sd"> * Copyright since 2007 PrestaShop SA and Contributors
</span><span class="sd"> * PrestaShop is an International Registered Trademark &amp; Property of PrestaShop SA
</span><span class="sd"> *
</span><span class="sd"> * NOTICE OF LICENSE
</span><span class="sd"> *
</span><span class="sd"> * This source file is subject to the Academic Free License version 3.0
</span><span class="sd"> * that is bundled with this package in the file LICENSE.md.
</span><span class="sd"> * It is also available through the world-wide-web at this URL:
</span><span class="sd"> * https://opensource.org/licenses/AFL-3.0
</span><span class="sd"> * If you did not receive a copy of the license and are unable to
</span><span class="sd"> * obtain it through the world-wide-web, please send an email
</span><span class="sd"> * to license@prestashop.com so we can send you a copy immediately.
</span><span class="sd"> *
</span><span class="sd"> * @author    PrestaShop SA and Contributors &lt;contact@prestashop.com&gt;
</span><span class="sd"> * @copyright Since 2007 PrestaShop SA and Contributors
</span><span class="sd"> * @license   https://opensource.org/licenses/AFL-3.0 Academic Free License version 3.0
</span><span class="sd"> */</span>
<span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>

<span class="k">namespace</span> <span class="nx">PrestaShop\Module\DemoDoctrine\Repository</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\EntityRepository</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\ORM\QueryBuilder</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">QuoteRepository</span> <span class="k">extends</span> <span class="nx">EntityRepository</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * @param int $langId
</span><span class="sd">     *
</span><span class="sd">     * @return array
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getQuotes</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$langId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="sd">/** @var QueryBuilder $qb */</span>
        <span class="nv">$qb</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createQueryBuilder</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">addSelect</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">addSelect</span><span class="p">(</span><span class="s1">&#39;ql&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">leftJoin</span><span class="p">(</span><span class="s1">&#39;q.quoteLangs&#39;</span><span class="p">,</span> <span class="s1">&#39;ql&#39;</span><span class="p">)</span>
        <span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">!==</span> <span class="nv">$langId</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$qb</span>
                <span class="o">-&gt;</span><span class="na">andWhere</span><span class="p">(</span><span class="s1">&#39;ql.lang = :langId&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;langId&#39;</span><span class="p">,</span> <span class="nv">$langId</span><span class="p">)</span>
            <span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$qb</span><span class="o">-&gt;</span><span class="na">getQuery</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<footer class="article-footer">
	
<div>
  Last updated on December 9, 2020
  :
  <a href="https://github.com/PrestaShop/docs/commit/aa366410fde527ae61e8015b84b51471db1dedd9">"Update afl license block" (aa366410f)</a>
  
</div>


	<div class="license">
		This article is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
	</div>
</footer>

        
        </div>
        

      </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1627507034"></script>
    <script src="/js/perfect-scrollbar.min.js?1627507034"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1627507034"></script>
    <script src="/js/jquery.sticky.js?1627507034"></script>
    <script src="/js/featherlight.min.js?1627507034"></script>
    <script src="/js/html5shiv-printshiv.min.js?1627507034"></script>
    <script src="/js/modernizr.custom-3.6.0.js?1627507034"></script>
    <script src="/js/learn.js?1627507034"></script>
    <script src="/js/hugo-learn.js?1627507034"></script>
    
    <script src="/main.js?1627507034"></script>
    <link href="/mermaid/mermaid.css?1627507034" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1627507034"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-2753771-44', 'auto');
	
	ga('send', 'pageview');
}
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: 'e5a3a32dad46a5aaaa771b2b37d7084a',
indexName: 'prestashop',
inputSelector: '#search-by',
debug: false
});
</script>

  </body>
</html>


<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.82.0" />
    <meta name="description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta name="twitter:image" content="https://devdocs.prestashop.com/images/social-cover.jpg" />
<meta name="twitter:site" content="@prestashop" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Multistore" />
<meta name="twitter:description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta property="og:image" content="https://devdocs.prestashop.com/images/social-cover.jpg" />
<meta property="og:site_name" content="PrestaShop" />
<meta property="og:title" content="Multistore" />
<meta property="og:description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta name="author" content="PrestaShop">

    <link rel="icon" href="/images/preston-logo@2x.png" type="image/png">

    <title>Multistore :: PrestaShop Developer Documentation</title>

    
    <link href="/css/font-awesome.min.css?1627507034" rel="stylesheet">
    <link href="/css/syntax-github.css?1627507034" rel="stylesheet">
    <link href="/css/featherlight.min.css?1627507034" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1627507034" rel="stylesheet">
    <link href="/css/auto-complete.css?1627507034" rel="stylesheet">
    
    <link href="/style.css?1627507034" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700" rel="stylesheet">

    <script src="/js/jquery-3.3.1.min.js?1627507034"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

  </head>
  <body class="" data-url="/1.7/modules/concepts/multistore/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">PrestaShop DevDocs</a>

    </div>
    
        <div class="searchbox-extended">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input id="search-by" type="search" placeholder="Search...">
</div>


    
  </div>

    <div class="highlightable">
    <ul class="topics">

      
        
      
    </ul>

    
    

    
    <section id="footer">
      <p><a href="https://github.com/PrestaShop/PrestaShop/"><i class="fa fa-github" aria-hidden="true"></i> PrestaShop on GitHub</a></p>
<p><a href="https://github.com/PrestaShop/PrestaShop/issues"><i class="fa fa-bug" aria-hidden="true"></i> Report a bug</a></p>
<p><a href="https://www.prestashop-project.org/slack/readme/"><i class="fa fa-comment" aria-hidden="true"></i> Join us on Slack</a></p>

    </section>
  </div>
</nav>





      <section id="body">
      <div id="overlay"></div>
      <div class="padding highlightable">
        
<div>
  <div id="top-bar">
    
      
      
      
      <div id="top-github-link">
        <a class="github-link" title='Improve this page' href="https://github.com/PrestaShop/docs/edit/master/src/content/1.7/modules/concepts/multistore.md" target="blank">
          <i class="fa fa-pencil"></i>
          <span id="top-github-link-text">Improve this page</span>
        </a>
        <a class="how-to-improve" href="/1.7/contribute/documentation/how/">
          <i class="fa fa-question-circle"></i>
          <span>How</span>
        </a>
      </div>
      
    
    <div id="breadcrumbs" itemscope="" itemtype="http://schema.org/breadcrumb">
      <span id="sidebar-toggle-span">
        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
          <i class="fa fa-bars"></i>
        </a>
      </span>
      <span class="links">
        
            
            
              
              
            
            
              
              
            
            
              
              
            
            
              
              
            
            
              <a href='/'>Home</a> > <a href='/1.7/'>PrestaShop 1.7</a> > <a href='/1.7/modules/'>Modules</a> > <a href='/1.7/modules/concepts/'>Extension concepts</a> > Multistore
            
          
            
          
            
          
            
          
            
          
      </span>
    </div>
  </div>
</div>




        

        
        
          
            <div id="toc">
  <div class="wrapper">
    <div id="toc-title">Table of Contents</div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#specifics-of-multistore-module-development">Specifics of multistore module development</a>
      <ul>
        <li><a href="#usage-of-configuration-variables">Usage of configuration variables</a></li>
        <li><a href="#handling-images-and-other-types-of-files">Handling images and other types of files</a></li>
        <li><a href="#building-database-tables-that-support-multistore">Building database tables that support multistore</a>
          <ul>
            <li><a href="#object-in-some-stores-only">Object in some stores only</a></li>
            <li><a href="#object-in-all-stores">Object in all stores</a></li>
            <li><a href="#different-language-in-every-store">Different language in every store</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>

    <div id="navigation">
  
  

  

  
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
    
  

  
  
  <a class="nav nav-next" href="/1.7/modules/payment/" title="Payment modules" style="margin-right: 0px;">
    <i class="fa fa-chevron-right"></i>
    Next article
  </a>
  
</div>

  </div>
</div>

          
        

        <div id="body-inner">

          




<h1 id="specifics-of-multistore-module-development">Specifics of multistore module development</h1>
<h2 id="usage-of-configuration-variables">Usage of configuration variables</h2>
<p>As indicated in the <a href="/1.7/development/components/configuration/">Configuration</a> section, some of the methods from the Configuration object have three optional parameters, which make it possible to target any other existing store on the current PrestaShop installation: <code>id_shop</code>, <code>id_shop_group</code> and <code>id_lang</code>.</p>
<p>While these parameters can prove useful when having to handle multiple specific and known stores from one of the presented Configuration method, they are not recommended for general usage. Your configuration code should only target the current store using the current Context, which every <code>Configuration</code> method does automatically.</p>
<p>In the few occasions where you need to apply a new value to the same Configuration variable for all existing stores, using the <code>Configuration::updateGlobalValue('myVariable', 'myValue')</code> method. You can then retrieve that value for the current store by using the <code>Configuration::get('myVariable')</code> method.</p>
<h2 id="handling-images-and-other-types-of-files">Handling images and other types of files</h2>
<p>Images can be defined on a per-store or a per-store-group basis: an item can have a default image on most stores on the PrestaShop installation, and another image for a specific store.</p>
<p>In order to achieve that, the name of the image must be stored in a configuration variable. The default image is then replaced on the fly with the store-specific image.</p>
<p>Let&rsquo;s explore how the Blockadvertising module does it. Using this module, you can upload an image to be displayed on the front office of the store, serving as an advertisement to any link you might want. The module was built to make use of the multistore feature: depending on the selected store or store group in the multistore menu, the user can assign the uploaded image to a given store context or store group context.</p>
<p>Here is how it saves a submitted file depending on the store:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="c1">// Saving only the main portion of the uploaded file&#39;s name, without the file extension.
</span><span class="c1"></span><span class="nx">Configuration</span><span class="o">::</span><span class="na">updateValue</span><span class="p">(</span>
    <span class="s1">&#39;BLOCKADVERT_IMG_EXT&#39;</span><span class="p">,</span>
    <span class="nx">substr</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;adv_img&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="nx">strrpos</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;adv_img&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">);</span>
                 
<span class="c1">// Setting the image&#39;s name with a name contextual to the shop context.
</span><span class="c1"></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_imgname</span> <span class="o">=</span> <span class="s1">&#39;advertising&#39;</span><span class="p">;</span>

<span class="c1">// Creating two versions of the image name, depending on the store context:
</span><span class="c1">// If the context is the current group, use the image named &#39;advertising-g&#39;
</span><span class="c1">// If the context is the current store, use the image named &#39;advertising-s&#39;
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="nx">Shop</span><span class="o">::</span><span class="na">getContext</span><span class="p">()</span> <span class="o">==</span> <span class="nx">Shop</span><span class="o">::</span><span class="na">CONTEXT_GROUP</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_imgname</span> <span class="o">=</span> <span class="s1">&#39;advertising&#39;</span><span class="o">.</span><span class="s1">&#39;-g&#39;</span><span class="o">.</span><span class="p">(</span><span class="nx">int</span><span class="p">)</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">context</span><span class="o">-&gt;</span><span class="na">shop</span><span class="o">-&gt;</span><span class="na">getContextShopGroupID</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">elseif</span> <span class="p">(</span><span class="nx">Shop</span><span class="o">::</span><span class="na">getContext</span><span class="p">()</span> <span class="o">==</span> <span class="nx">Shop</span><span class="o">::</span><span class="na">CONTEXT_SHOP</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_imgname</span> <span class="o">=</span> <span class="s1">&#39;advertising&#39;</span><span class="o">.</span><span class="s1">&#39;-s&#39;</span><span class="o">.</span><span class="p">(</span><span class="nx">int</span><span class="p">)</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">context</span><span class="o">-&gt;</span><span class="na">shop</span><span class="o">-&gt;</span><span class="na">getContextShopID</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Copying the image in the module directory with its new contextual name.
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">move_uploaded_file</span><span class="p">(</span>
    <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;adv_img&#39;</span><span class="p">][</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">],</span>
    <span class="nx">_PS_MODULE_DIR_</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_imgname</span><span class="o">.</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="nx">Configuration</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;BLOCKADVERT_IMG_EXT&#39;</span><span class="p">))</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="nv">$errors</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">l</span><span class="p">(</span><span class="s1">&#39;File upload error.&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>And here is how it decides which image to display, depending on the current store:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="c1">// Setting the main name of the image.
</span><span class="c1"></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_imgname</span> <span class="o">=</span> <span class="s1">&#39;advertising&#39;</span><span class="p">;</span>

<span class="c1">// Setting the contextual name of the file, depending on the context.
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span>
    <span class="p">(</span><span class="nx">Shop</span><span class="o">::</span><span class="na">getContext</span><span class="p">()</span> <span class="o">==</span> <span class="nx">Shop</span><span class="o">::</span><span class="na">CONTEXT_GROUP</span>  <span class="o">||</span> <span class="nx">Shop</span><span class="o">::</span><span class="na">getContext</span><span class="p">()</span> <span class="o">==</span> <span class="nx">Shop</span><span class="o">::</span><span class="na">CONTEXT_SHOP</span><span class="p">)</span>
    <span class="o">&amp;&amp;</span> <span class="nx">file_exists</span><span class="p">(</span>
        <span class="nx">_PS_MODULE_DIR_</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_imgname</span> <span class="o">.</span> <span class="s1">&#39;-g&#39;</span>
        <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">context</span><span class="o">-&gt;</span><span class="na">shop</span><span class="o">-&gt;</span><span class="na">getContextShopGroupID</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;.&#39;</span>
        <span class="o">.</span> <span class="nx">Configuration</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;BLOCKADVERT_IMG_EXT&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_imgname</span> <span class="o">.=</span> <span class="s1">&#39;-g&#39;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">context</span><span class="o">-&gt;</span><span class="na">shop</span><span class="o">-&gt;</span><span class="na">getContextShopGroupID</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span>
    <span class="nx">Shop</span><span class="o">::</span><span class="na">getContext</span><span class="p">()</span> <span class="o">==</span> <span class="nx">Shop</span><span class="o">::</span><span class="na">CONTEXT_SHOP</span>
    <span class="o">&amp;&amp;</span> <span class="nx">file_exists</span><span class="p">(</span>
        <span class="nx">_PS_MODULE_DIR_</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_imgname</span> <span class="o">.</span> <span class="s1">&#39;-s&#39;</span>
        <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">context</span><span class="o">-&gt;</span><span class="na">shop</span><span class="o">-&gt;</span><span class="na">getContextShopID</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;.&#39;</span> 
        <span class="o">.</span> <span class="nx">Configuration</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;BLOCKADVERT_IMG_EXT&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_imgname</span> <span class="o">.=</span> <span class="s1">&#39;-s&#39;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">context</span><span class="o">-&gt;</span><span class="na">shop</span><span class="o">-&gt;</span><span class="na">getContextShopID</span><span class="p">();</span>
<span class="p">}</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_img</span> <span class="o">=</span> <span class="nx">Tools</span><span class="o">::</span><span class="na">getMediaServer</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">)</span>
    <span class="o">.</span> <span class="nx">_MODULE_DIR_</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">adv_imgname</span> <span class="o">.</span> <span class="s1">&#39;.&#39;</span> 
    <span class="o">.</span> <span class="nx">Configuration</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;BLOCKADVERT_IMG_EXT&#39;</span><span class="p">);</span>
</code></pre></div><h2 id="building-database-tables-that-support-multistore">Building database tables that support multistore</h2>
<p>There can be several scenarios:</p>
<ul>
<li>The object/entity exists in some stores, but not in all of them: you should use an associative table, and handle it using <code>id_group_shop</code>.</li>
<li>The object/entity exists in all stores: use the regular tables, with a custom field. Handle it using <code>id_entity</code>, <code>id_group_shop</code> and the attributes.</li>
<li>The language must be different for every store: handle it using <code>id_shop</code> in the <code>_lang</code> table.</li>
</ul>
<h3 id="object-in-some-stores-only">Object in some stores only</h3>
<p>When building SQL queries that manage module data, the method to use is <code>Shop::addSqlRestriction($share = false, $alias = null)</code>.</p>
<p>It makes it possible to add restrictions to a SQL query, in order to retrieve information on a shop or a shop group.</p>
<p>The parameters are optional:</p>
<ul>
<li><code>$share</code>: is used to add a <code>WHERE</code> clause indicating that we are in the same group as the current store.</li>
<li><code>$alias</code>: is used to set the table alias to which the <code>WHERE</code> clause should be applied.</li>
</ul>
<p>For instance, this query retrieves visitor connections from a given shop:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="s1">&#39;SELECT date_add, COUNT(`date_add`) as total
</span><span class="s1"> FROM `&#39;</span> <span class="o">.</span> <span class="nx">_DB_PREFIX_</span> <span class="o">.</span> <span class="s1">&#39;connections`
</span><span class="s1"> WHERE 1 &#39;</span> <span class="o">.</span> <span class="nx">Shop</span><span class="o">::</span><span class="na">addSqlRestriction</span><span class="p">();</span>
</code></pre></div><h3 id="object-in-all-stores">Object in all stores</h3>
<p>The method to use is <code>Shop::addSqlAssociation($table, $alias, $inner_join = true, $on = null, $force_not_default = false)</code>.</p>
<p>It makes it possible to add a <code>JOIN</code> clause to the SQL query, joining a table and its associated table in multistore mode.</p>
<p>For instance, this query automatically associates the<code> _DB_PREFIX_ . 'product_shop'</code> table to the <code>_DB_PREFIX_ . 'product'</code> table using the <code>p</code> alias:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="s1">&#39;SELECT wp.`id_product`
</span><span class="s1"> FROM `&#39;</span> <span class="o">.</span> <span class="nx">_DB_PREFIX_</span> <span class="o">.</span> <span class="s1">&#39;wishlist_product` wp
</span><span class="s1"> LEFT JOIN `&#39;</span> <span class="o">.</span> <span class="nx">_DB_PREFIX_</span> <span class="o">.</span> <span class="s1">&#39;product` p ON p.`id_product` = wp.`id_product`
</span><span class="s1"> &#39;</span> <span class="o">.</span> <span class="nx">Shop</span><span class="o">::</span><span class="na">addSqlAssociation</span><span class="p">(</span><span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">);</span>
</code></pre></div><p>This way, the joint between the information from the product and the current store&rsquo;s context is applied.</p>
<h3 id="different-language-in-every-store">Different language in every store</h3>
<p>The method to use is <code>Shop::addSqlRestrictionOnLang($alias = null, $id_shop = null)</code>.</p>
<p>It makes it possible to add a restriction on id_shop for a multishop language table.</p>
<p>For instance, this query automatically associates the<code> _DB_PREFIX_ . 'product_lang'</code> table to the <code>_DB_PREFIX_ . 'wishlist_product'</code> table using the <code>pl</code> alias:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="s1">&#39;SELECT wp.`id_product`
</span><span class="s1"> FROM `&#39;</span> <span class="o">.</span> <span class="nx">_DB_PREFIX_</span> <span class="o">.</span> <span class="s1">&#39;wishlist_product` wp
</span><span class="s1"> LEFT JOIN `&#39;</span> <span class="o">.</span> <span class="nx">_DB_PREFIX_</span> <span class="o">.</span> <span class="s1">&#39;product` p ON p.`id_product` = wp.`id_product`
</span><span class="s1"> &#39;</span> <span class="o">.</span> <span class="nx">Shop</span><span class="o">::</span><span class="na">addSqlAssociation</span><span class="p">(</span><span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;
</span><span class="s1"> LEFT JOIN `&#39;</span> <span class="o">.</span> <span class="nx">_DB_PREFIX_</span> <span class="o">.</span> <span class="s1">&#39;product_lang` pl ON pl.`id_product` = wp.`id_product`&#39;</span> <span class="o">.</span> <span class="nx">Shop</span><span class="o">::</span><span class="na">addSqlRestrictionOnLang</span><span class="p">(</span><span class="s1">&#39;pl&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;
</span><span class="s1"> WHERE pl.`id_lang` = &#39;</span> <span class="o">.</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$id_lang</span><span class="p">;</span>
</code></pre></div><p>This way, the joint between the language information of the product and the current store language is applied.</p>


<footer class="article-footer">
	
<div>
  Last updated on July 2, 2021
  :
  <a href="https://github.com/PrestaShop/docs/commit/499daab626e7273061174bcb3fcd177f2e361f8b">"Update configuration storage documentation" (499daab62)</a>
  
</div>


	<div class="license">
		This article is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
	</div>
</footer>

        
        </div>
        

      </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1627507034"></script>
    <script src="/js/perfect-scrollbar.min.js?1627507034"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1627507034"></script>
    <script src="/js/jquery.sticky.js?1627507034"></script>
    <script src="/js/featherlight.min.js?1627507034"></script>
    <script src="/js/html5shiv-printshiv.min.js?1627507034"></script>
    <script src="/js/modernizr.custom-3.6.0.js?1627507034"></script>
    <script src="/js/learn.js?1627507034"></script>
    <script src="/js/hugo-learn.js?1627507034"></script>
    
    <script src="/main.js?1627507034"></script>
    <link href="/mermaid/mermaid.css?1627507034" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1627507034"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-2753771-44', 'auto');
	
	ga('send', 'pageview');
}
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: 'e5a3a32dad46a5aaaa771b2b37d7084a',
indexName: 'prestashop',
inputSelector: '#search-by',
debug: false
});
</script>

  </body>
</html>


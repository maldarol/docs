<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.82.0" />
    <meta name="description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta name="twitter:image" content="https://devdocs.prestashop.com/images/social-cover.jpg" />
<meta name="twitter:site" content="@prestashop" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="The Import component" />
<meta name="twitter:description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta property="og:image" content="https://devdocs.prestashop.com/images/social-cover.jpg" />
<meta property="og:site_name" content="PrestaShop" />
<meta property="og:title" content="The Import component" />
<meta property="og:description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta name="author" content="PrestaShop">

    <link rel="icon" href="/images/preston-logo@2x.png" type="image/png">

    <title>The Import component :: PrestaShop Developer Documentation</title>

    
    <link href="/css/font-awesome.min.css?1627507037" rel="stylesheet">
    <link href="/css/syntax-github.css?1627507037" rel="stylesheet">
    <link href="/css/featherlight.min.css?1627507037" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1627507037" rel="stylesheet">
    <link href="/css/auto-complete.css?1627507037" rel="stylesheet">
    
    <link href="/style.css?1627507037" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700" rel="stylesheet">

    <script src="/js/jquery-3.3.1.min.js?1627507037"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

  </head>
  <body class="" data-url="/1.7/development/components/import/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">PrestaShop DevDocs</a>

    </div>
    
        <div class="searchbox-extended">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input id="search-by" type="search" placeholder="Search...">
</div>


    
  </div>

    <div class="highlightable">
    <ul class="topics">

      
        
      
    </ul>

    
    

    
    <section id="footer">
      <p><a href="https://github.com/PrestaShop/PrestaShop/"><i class="fa fa-github" aria-hidden="true"></i> PrestaShop on GitHub</a></p>
<p><a href="https://github.com/PrestaShop/PrestaShop/issues"><i class="fa fa-bug" aria-hidden="true"></i> Report a bug</a></p>
<p><a href="https://www.prestashop-project.org/slack/readme/"><i class="fa fa-comment" aria-hidden="true"></i> Join us on Slack</a></p>

    </section>
  </div>
</nav>





      <section id="body">
      <div id="overlay"></div>
      <div class="padding highlightable">
        
<div>
  <div id="top-bar">
    
      
      
      
      <div id="top-github-link">
        <a class="github-link" title='Improve this page' href="https://github.com/PrestaShop/docs/edit/master/src/content/1.7/development/components/import/_index.md" target="blank">
          <i class="fa fa-pencil"></i>
          <span id="top-github-link-text">Improve this page</span>
        </a>
        <a class="how-to-improve" href="/1.7/contribute/documentation/how/">
          <i class="fa fa-question-circle"></i>
          <span>How</span>
        </a>
      </div>
      
    
    <div id="breadcrumbs" itemscope="" itemtype="http://schema.org/breadcrumb">
      <span id="sidebar-toggle-span">
        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
          <i class="fa fa-bars"></i>
        </a>
      </span>
      <span class="links">
        
            
            
              
              
            
            
              
              
            
            
              
              
            
            
              
              
            
            
              <a href='/'>Home</a> > <a href='/1.7/'>PrestaShop 1.7</a> > <a href='/1.7/development/'>Core Reference</a> > <a href='/1.7/development/components/'>Components</a> > Import
            
          
            
          
            
          
            
          
            
          
      </span>
    </div>
  </div>
</div>




        

        
        
          
            <div id="toc">
  <div class="wrapper">
    <div id="toc-title">Table of Contents</div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#the-import-component">The Import component</a>
      <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#import-step-1">Import step 1</a>
          <ul>
            <li><a href="#import-configuration">Import configuration</a></li>
          </ul>
        </li>
        <li><a href="#import-step-2">Import step 2</a>
          <ul>
            <li><a href="#number-of-rows-to-skip">Number of rows to skip</a></li>
            <li><a href="#entity-fields-matching">Entity fields matching</a>
              <ul>
                <li><a href="#import-entity">Import entity</a></li>
                <li><a href="#entity-field">Entity field</a></li>
                <li><a href="#data-row">Data row</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#import-operation">Import operation</a>
          <ul>
            <li><a href="#import-configuration-preparation">Import configuration preparation</a></li>
          </ul>
        </li>
        <li><a href="#import-handler">Import handler</a></li>
        <li><a href="#importer">Importer</a>
          <ul>
            <li><a href="#import-execution-example-in-a-controller">Import execution example in a controller</a></li>
            <li><a href="#related-javascript">Related JavaScript</a>
              <ul>
                <li><a href="#entityfieldsvalidator"><code>EntityFieldsValidator</code></a></li>
                <li><a href="#importbatchsizecalculator"><code>ImportBatchSizeCalculator</code></a></li>
                <li><a href="#importdatatable"><code>ImportDataTable</code></a></li>
                <li><a href="#importmatchconfiguration"><code>ImportMatchConfiguration</code></a></li>
                <li><a href="#postsizechecker"><code>PostSizeChecker</code></a></li>
                <li><a href="#importprogressmodal"><code>ImportProgressModal</code></a></li>
                <li><a href="#importer-1"><code>Importer</code></a></li>
                <li><a href="#importdatapage"><code>ImportDataPage</code></a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>

    <div id="navigation">
  
  

  

  
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
    
  

  
  
  <a class="nav nav-next" href="/1.7/development/components/mail-templates/" title="The Mail Template component" style="margin-right: 0px;">
    <i class="fa fa-chevron-right"></i>
    Next article
  </a>
  
</div>

  </div>
</div>

          
        

        <div id="body-inner">

          




<h1 id="the-import-component">The Import component</h1>

<div class="notices note" >The legacy import page is not fully migrated to new architecture yet.</div>

<h2 id="introduction">Introduction</h2>
<p>The import workflow consists of the following steps:</p>
<ul>
<li>Configuration in import step 1 (such as data source, separators, other settings).</li>
<li><em>Entity</em> fields matching to data source columns in import step 2.</li>
<li>Data validation process.</li>
<li>Import process.</li>
</ul>

<div class="notices tip" >When using word <em><strong>entity</strong></em>, we are referring to a business entity from PrestaShop, such as <em>Product</em>, <em>Category</em>, <em>Address</em>, etc.</div>

<h2 id="import-step-1">Import step 1</h2>
<p>This page consists of import configuration, where you select the import data source and choose wanted options, such as field separators, import language, whether old data should be truncated or not, etc.
All configuration which is selected in this page, is represented by the <code>PrestaShop\PrestaShop\Core\Import\Configuration\ImportConfigInterface</code>.</p>
<figure>
    <img src="./img/import_step_1.png"/> <figcaption>
            <h4>Import step 1</h4>
        </figcaption>
</figure>

<h3 id="import-configuration">Import configuration</h3>
<p>The default implementation of the mentioned configuration interface (<code>PrestaShop\PrestaShop\Core\Import\Configuration\ImportConfigInterface</code>) in PrestaShop can be seen in <code>PrestaShop\PrestaShop\Core\Import\Configuration\ImportConfig</code> class.
This class is a value object, which values are not supposed to change during one import operation.</p>
<p>The default <code>ImportConfig</code> implementation can be instantiated using the factory <code>PrestaShop\PrestaShop\Core\Import\Configuration\ImportConfigFactory</code>.</p>
<h2 id="import-step-2">Import step 2</h2>
<p>In the second import step we can configure only two things that are directly related to the import:</p>
<ul>
<li>Number of rows to skip from the top of import file.</li>
<li>Entity fields matching to data source columns.</li>
</ul>
<figure>
    <img src="./img/import_step_2.png"/> <figcaption>
            <h4>Import step 2</h4>
        </figcaption>
</figure>

<h3 id="number-of-rows-to-skip">Number of rows to skip</h3>
<p>The number of rows to skip from the top of import file value is also held in the default <code>ImportConfig</code> implementation and is exposed by the <code>PrestaShop\PrestaShop\Core\Import\Configuration\ImportConfigInterface</code>.
The interface fits well for this configuration value, because the value is not supposed to change during the import operation.</p>
<h3 id="entity-fields-matching">Entity fields matching</h3>
<p>
<div class="notices tip" >Entity fields matching can be explained as selecting which of the available entity fields is represented by which column in the import file.</div>

There are a couple of classes implemented in PrestaShop, that ease up the entity fields matching:</p>
<ul>
<li><em>Import entity</em> - represented by <code>PrestaShop\PrestaShop\Core\Import\Entity</code>.</li>
<li><em>Entity field</em> - represented by <code>PrestaShop\PrestaShop\Core\Import\EntityField\EntityField</code>.</li>
<li><em>Data row</em> - represented by <code>PrestaShop\PrestaShop\Core\Import\File\DataRow\DataRow</code>.</li>
</ul>
<h4 id="import-entity">Import entity</h4>
<p>This class holds all import types, that are available by default in PrestaShop and allows to retrieve them easily:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Core/Import/Entity.php
</span><span class="c1"></span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">Entity</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="no">TYPE_CATEGORIES</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">const</span> <span class="no">TYPE_PRODUCTS</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">const</span> <span class="no">TYPE_COMBINATIONS</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">const</span> <span class="no">TYPE_CUSTOMERS</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">const</span> <span class="no">TYPE_ADDRESSES</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="k">const</span> <span class="no">TYPE_MANUFACTURERS</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="k">const</span> <span class="no">TYPE_SUPPLIERS</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
    <span class="k">const</span> <span class="no">TYPE_ALIAS</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="k">const</span> <span class="no">TYPE_STORE_CONTACTS</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
    
    <span class="o">&lt;...&gt;</span>
<span class="p">}</span>
</code></pre></div><h4 id="entity-field">Entity field</h4>
<p>Entity field is described by an implementation of <code>PrestaShop\PrestaShop\Core\Import\EntityField\EntityFieldInterface</code>.</p>
<p>Entity fields are stored in collections, by implementing <code>PrestaShop\PrestaShop\Core\Import\EntityField\EntityFieldCollectionInterface</code>.
Entity field collection default implementation is this class: <code>PrestaShop\PrestaShop\Core\Import\EntityField\EntityFieldCollection</code>.</p>
<p>Entity field collections are provided by providers, which implement <code>PrestaShop\PrestaShop\Core\Import\EntityField\Provider\EntityFieldsProviderInterface</code>.
Every entity, which is available for import in PrestaShop, has it&rsquo;s own fields provider in the <code>PrestaShop\PrestaShop\Core\Import\EntityField\Provider</code> namespace.</p>
<p>For example, the entity fields provider for <code>Customer</code> entity builds the entity fields collection in the following way:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Core/Import/EntityField/Provider/CustomerFieldsProvider.php
</span><span class="c1"></span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">CustomerFieldsProvider</span> <span class="k">implements</span> <span class="nx">EntityFieldsProviderInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getCollection</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin.Global&#39;</span><span class="p">)),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Active  (0/1)&#39;</span><span class="p">)),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;id_gender&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Titles ID (Mr = 1, Ms = 2, else 0)&#39;</span><span class="p">)),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Email&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin.Global&#39;</span><span class="p">),</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;passwd&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Password&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin.Global&#39;</span><span class="p">),</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;birthday&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Birth date (yyyy-mm-dd)&#39;</span><span class="p">)),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;lastname&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Last name&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin.Global&#39;</span><span class="p">),</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;firstname&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;First name&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin.Global&#39;</span><span class="p">),</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;newsletter&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Newsletter (0/1)&#39;</span><span class="p">)),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;optin&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Partner offers (0/1)&#39;</span><span class="p">)),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;date_add&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Registration date (yyyy-mm-dd)&#39;</span><span class="p">)),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Groups (x,y,z...)&#39;</span><span class="p">)),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span><span class="s1">&#39;id_default_group&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Default group ID&#39;</span><span class="p">)),</span>
            <span class="k">new</span> <span class="nx">EntityField</span><span class="p">(</span>
                <span class="s1">&#39;id_shop&#39;</span><span class="p">,</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;ID / Name of shop&#39;</span><span class="p">),</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Ignore this field if you don\&#39;t use the Multistore tool. If you leave this field empty, the default shop will be used.&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin.Advparameters.Help&#39;</span><span class="p">)</span>
            <span class="p">),</span>
        <span class="p">];</span>

        <span class="k">return</span> <span class="nx">EntityFieldCollection</span><span class="o">::</span><span class="na">createFromArray</span><span class="p">(</span><span class="nv">$fields</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><h4 id="data-row">Data row</h4>
<p><code>DataRow</code> is an object representation of a data row from import source file.</p>
<p><code>DataRow</code> is described by an interface <code>PrestaShop\PrestaShop\Core\Import\File\DataRow\DataRowInterface</code> and can be used in collections to represent multiple rows of data.</p>
<p><code>DataRow</code> collections can be built using <code>DataRowCollectionFactory</code>, which should implement the <code>PrestaShop\PrestaShop\Core\Import\File\DataRow\Factory\DataRowCollectionFactoryInterface</code>.</p>
<p>Currently there is one <code>DataRowCollectionFactory</code> implementation available in PrestaShop, which builds the <code>DataRowCollection</code> by reading a data file:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Core/Import/File/DataRow/Factory/DataRowCollectionFactory.php
</span><span class="c1"></span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">DataRowCollectionFactory</span> <span class="k">implements</span> <span class="nx">DataRowCollectionFactoryInterface</span>
<span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">buildFromFile</span><span class="p">(</span><span class="nx">SplFileInfo</span> <span class="nv">$file</span><span class="p">,</span> <span class="nv">$maxRowsInCollection</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$dataRowCollection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DataRowCollection</span><span class="p">();</span>
        <span class="nv">$rowIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fileReader</span><span class="o">-&gt;</span><span class="na">read</span><span class="p">(</span><span class="nv">$file</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$dataRow</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">null</span> <span class="o">!==</span> <span class="nv">$maxRowsInCollection</span> <span class="o">&amp;&amp;</span> <span class="nv">$rowIndex</span> <span class="o">&gt;=</span> <span class="nv">$maxRowsInCollection</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nv">$dataRowCollection</span><span class="o">-&gt;</span><span class="na">addDataRow</span><span class="p">(</span><span class="nv">$dataRow</span><span class="p">);</span>
            <span class="o">++</span><span class="nv">$rowIndex</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$dataRowCollection</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id="import-operation">Import operation</h2>
<p>The import operation can be imaged as multiple smaller import processes running one after another, until the data is fully imported or critical errors occur.</p>
<p>Import operation can be described by three essential parts:</p>
<ul>
<li>Import configuration preparation.</li>
<li>The import handler.</li>
<li>The importer.</li>
</ul>
<h3 id="import-configuration-preparation">Import configuration preparation</h3>
<p>To run the import process we have to prepare the configuration for it.
As mentioned in previous topics, there are two configuration objects (<code>ImportConfig</code> and <code>ImportRuntimeConfig</code>), that have to be prepared for the import process. Both of them can be built using factories, which are described by interfaces <code>PrestaShop\PrestaShop\Core\Import\Configuration\ImportConfigFactoryInterface</code> and <code>PrestaShop\PrestaShop\Core\Import\Configuration\ImportRuntimeConfigFactoryInterface</code>.</p>
<p>There is one implementation of each of the two configuration interfaces in PrestaShop. Both of them are available to build the relevant import config object out of Symfony <code>Request</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Core/Import/Configuration/ImportConfigFactory.php
</span><span class="c1"></span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">ImportConfigFactory</span> <span class="k">implements</span> <span class="nx">ImportConfigFactoryInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">buildFromRequest</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$separator</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span>
            <span class="s1">&#39;separator&#39;</span><span class="p">,</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;separator&#39;</span><span class="p">,</span> <span class="nx">ImportSettings</span><span class="o">::</span><span class="na">DEFAULT_SEPARATOR</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="nv">$multivalueSeparator</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span>
            <span class="s1">&#39;multiple_value_separator&#39;</span><span class="p">,</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;multiple_value_separator&#39;</span><span class="p">,</span> <span class="nx">ImportSettings</span><span class="o">::</span><span class="na">DEFAULT_MULTIVALUE_SEPARATOR</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nx">ImportConfig</span><span class="p">(</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;csv&#39;</span><span class="p">,</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;csv&#39;</span><span class="p">)),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getInt</span><span class="p">(</span><span class="s1">&#39;entity&#39;</span><span class="p">,</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;entity&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;iso_lang&#39;</span><span class="p">,</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;iso_lang&#39;</span><span class="p">)),</span>
            <span class="nv">$separator</span><span class="p">,</span>
            <span class="nv">$multivalueSeparator</span><span class="p">,</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getBoolean</span><span class="p">(</span><span class="s1">&#39;truncate&#39;</span><span class="p">,</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;truncate&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">)),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getBoolean</span><span class="p">(</span><span class="s1">&#39;regenerate&#39;</span><span class="p">,</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;regenerate&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">)),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getBoolean</span><span class="p">(</span><span class="s1">&#39;match_ref&#39;</span><span class="p">,</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;match_ref&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">)),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getBoolean</span><span class="p">(</span><span class="s1">&#39;forceIDs&#39;</span><span class="p">,</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;forceIDs&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">)),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getBoolean</span><span class="p">(</span><span class="s1">&#39;sendemail&#39;</span><span class="p">,</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getSession</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;sendemail&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">)),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getInt</span><span class="p">(</span><span class="s1">&#39;skip&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Core/Import/Configuration/ImportRuntimeConfigFactory.php
</span><span class="c1"></span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">ImportRuntimeConfigFactory</span> <span class="k">implements</span> <span class="nx">ImportRuntimeConfigFactoryInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">buildFromRequest</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$sharedData</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;crossStepsVars&#39;</span><span class="p">,</span> <span class="p">[]);</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nx">ImportRuntimeConfig</span><span class="p">(</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getBoolean</span><span class="p">(</span><span class="s1">&#39;validateOnly&#39;</span><span class="p">),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getInt</span><span class="p">(</span><span class="s1">&#39;offset&#39;</span><span class="p">),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getInt</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span><span class="p">),</span>
            <span class="nx">json_decode</span><span class="p">(</span><span class="nv">$sharedData</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;type_value&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id="import-handler">Import handler</h2>
<p>To handle the import process we must prepare an <code>ImportHandler</code>, which will have access to our specific logic for import operation. The <code>ImportHandler</code> should implement <code>PrestaShop/PrestaShop/Core/Import/Handler/ImportHandlerInterface</code>.</p>
<p>There are three main methods exposed by the interface, which are essential for import logic execution:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Core/Import/Handler/ImportHandlerInterface.php
</span><span class="c1"></span>
<span class="k">interface</span> <span class="nx">ImportHandlerInterface</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * Executed before import process is started.
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setUp</span><span class="p">(</span><span class="nx">ImportConfigInterface</span> <span class="nv">$importConfig</span><span class="p">,</span> <span class="nx">ImportRuntimeConfigInterface</span> <span class="nv">$runtimeConfig</span><span class="p">);</span>

    <span class="sd">/**
</span><span class="sd">     * Imports one data row.
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">importRow</span><span class="p">(</span>
        <span class="nx">ImportConfigInterface</span> <span class="nv">$importConfig</span><span class="p">,</span>
        <span class="nx">ImportRuntimeConfigInterface</span> <span class="nv">$runtimeConfig</span><span class="p">,</span>
        <span class="nx">DataRowInterface</span> <span class="nv">$dataRow</span>
    <span class="p">);</span>

    <span class="sd">/**
</span><span class="sd">     * Executed when the import process is completed.
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">tearDown</span><span class="p">(</span><span class="nx">ImportConfigInterface</span> <span class="nv">$importConfig</span><span class="p">,</span> <span class="nx">ImportRuntimeConfigInterface</span> <span class="nv">$runtimeConfig</span><span class="p">);</span>
    
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><ul>
<li><code>setUp()</code> - executed before each import process. You can set prerequisites in this method, log some data, or execute additional operations that should be executed before starting the import. The method has both <code>ImportConfigInterface</code> and <code>ImportRuntimeConfigInterface</code> as arguments, meaning you can access the configuration if needed for import preparation.</li>
<li><code>importRow()</code> - executed for every row that&rsquo;s being imported. This method should run the logic, that imports the data for one row. In addition to import configuration, this method also has a <code>PrestaShop\PrestaShop\Core\Import\File\DataRow\DataRowInterface</code> as an argument, which is an object representation of the current row from the import data source.</li>
<li><code>tearDown()</code> - executed when the import process is finished. Useful for actions that have to be done only once after each process.</li>
</ul>
<h2 id="importer">Importer</h2>
<p>The <code>Importer</code> is responsible for running the import logic from <code>ImportHandler</code>, and applying the import configuration properly during the process.
<code>Importer</code> is an object that implements the <code>PrestaShop\PrestaShop\Core\Import\ImporterInterface</code>. PrestaShop comes with one <code>Importer</code> implementation (<code>PrestaShop\PrestaShop\Core\Import\Importer</code>), which can be easily used for your needs.</p>
<p>The <code>PrestaShop\PrestaShop\Core\Import\ImporterInterface</code> exposes only one method:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Core/Import/ImporterInterface.php
</span><span class="c1"></span>
<span class="k">interface</span> <span class="nx">ImporterInterface</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * Process the import.
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">import</span><span class="p">(</span>
        <span class="nx">ImportConfigInterface</span> <span class="nv">$importConfig</span><span class="p">,</span>
        <span class="nx">ImportRuntimeConfigInterface</span> <span class="nv">$runtimeConfig</span><span class="p">,</span>
        <span class="nx">ImportHandlerInterface</span> <span class="nv">$importHandler</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p><code>import()</code> method accepts the import configurations and the import handler implementation as arguments and will execute the import logic automatically.</p>
<h3 id="import-execution-example-in-a-controller">Import execution example in a controller</h3>
<p>The <code>processImportAction()</code> controller action (from the example below) imports one batch of the import data at a time.
It can be run multiple times, until all data is fully imported.</p>
<p>The controller action below is being called multiple times (via <em>AJAX</em>) by the <em>JavaScript</em> part of the import component,
until all data is imported from the source file:</p>
<div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/PrestaShopBundle/Controller/Admin/Configure/AdvancedParameters/ImportController.php
</span><span class="c1"></span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">processImportAction</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$importer</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;prestashop.core.import.importer&#39;</span><span class="p">);</span>
    <span class="nv">$importConfigFactory</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;prestashop.core.import.config_factory&#39;</span><span class="p">);</span>
    <span class="nv">$runtimeConfigFactory</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;prestashop.core.import.runtime_config_factory&#39;</span><span class="p">);</span>
    <span class="nv">$importHandlerFinder</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;prestashop.adapter.import.handler_finder&#39;</span><span class="p">);</span>
    
    <span class="c1">// Building the configuration objects
</span><span class="c1"></span>    <span class="nv">$importConfig</span> <span class="o">=</span> <span class="nv">$importConfigFactory</span><span class="o">-&gt;</span><span class="na">buildFromRequest</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
    <span class="nv">$runtimeConfig</span> <span class="o">=</span> <span class="nv">$runtimeConfigFactory</span><span class="o">-&gt;</span><span class="na">buildFromRequest</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
    
    <span class="c1">// Running the import process
</span><span class="c1"></span>    <span class="nv">$importer</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span>
        <span class="nv">$importConfig</span><span class="p">,</span>
        <span class="nv">$runtimeConfig</span><span class="p">,</span>
        <span class="nv">$importHandlerFinder</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="nv">$importConfig</span><span class="o">-&gt;</span><span class="na">getEntityType</span><span class="p">())</span> <span class="c1">// Finding import handler
</span><span class="c1"></span>    <span class="p">);</span>
    
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">(</span><span class="nv">$runtimeConfig</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div><h3 id="related-javascript">Related JavaScript</h3>
<p>Since the import operation can be heavy and take many resources to complete (depending on the amount of data to be imported),
in PrestaShop it is being executed in smaller processes.
To achieve that, some <em>JavaScript</em> code is being used, which continuously fires <em>AJAX</em> requests that trigger the import processing on the server, until the import finishes.</p>
<p>All <em>JavaScript</em> code, which is used by the import component, can be found under <code>admin-dev/themes/new-theme/js/pages/import-data/</code> directory.
We can find different <em>JavaScript</em> components there, which are explained below.</p>
<h4 id="entityfieldsvalidator"><code>EntityFieldsValidator</code></h4>
<p>Responsible for validating selected entity fields in import page 2 data table.
It makes sure that you don&rsquo;t miss any required fields, prevents you from selecting same field twice and shows error messages if you do.</p>
<figure>
    <img src="./img/import_step_2_validation.png"/> <figcaption>
            <h4>Validation in import step 2 - duplicate fields</h4>
        </figcaption>
</figure>

<h4 id="importbatchsizecalculator"><code>ImportBatchSizeCalculator</code></h4>
<p>Calculates the most reasonable batch size for each import process, depending on server&rsquo;s response time.
It adapts the batch size of the next import iteration by measuring how long it took for the server to process the data in previous import iteration.</p>
<h4 id="importdatatable"><code>ImportDataTable</code></h4>
<p>Responsible for pagination functionality in the import data preview table.
The pagination arrows appear below the data table and can be used to peek the source file preview forward or backwards.</p>
<figure>
    <img src="./img/import_step_2_pagination.png"/> <figcaption>
            <h4>Import step 2 data preview table - pagination arrows</h4>
        </figcaption>
</figure>

<h4 id="importmatchconfiguration"><code>ImportMatchConfiguration</code></h4>
<p>Responsible for saving, loading or deleting import matches configurations.
Import match configuration allows saving the matched entity fields for later reusability.</p>
<figure>
    <img src="./img/import_match_configuration.png"/> <figcaption>
            <h4>Import match configuration interface</h4>
        </figcaption>
</figure>

<h4 id="postsizechecker"><code>PostSizeChecker</code></h4>
<p>Responsible for checking if <em>POST</em> size limit is being reached.
It&rsquo;s used in each import process, to make sure it won&rsquo;t reach the limits.</p>
<h4 id="importprogressmodal"><code>ImportProgressModal</code></h4>
<p>Responsible for displaying the import progress for the end user in a modal window.
It updates the progress bar of the modal, displays messages, shows/hides the buttons in modal when asked for.</p>
<figure>
    <img src="./img/import_modal.png"/> <figcaption>
            <h4>Import modal</h4>
        </figcaption>
</figure>

<h4 id="importer-1"><code>Importer</code></h4>
<p>Executes import process and fires <em>AJAX</em> import requests continuously.
It uses the <code>PostSizeChecker</code>, <code>ImportBatchCalculator</code> and <code>ImportProgressModal</code> components internally and connects them to execute the import process.</p>
<h4 id="importdatapage"><code>ImportDataPage</code></h4>
<p>Responsible for running the <code>Importer</code> component when the end user clicks <em>Import</em> button.
Collects data from the import match configuration form and passes it to the <code>Importer</code>.</p>




<footer class="article-footer">
  
<div>
  Last updated on June 16, 2020
  :
  <a href="https://github.com/PrestaShop/docs/commit/9bf3ecbec1491aed5e3d43a44496c9e0c96e2e34">"Use native syntax highlighter &#43; fix highlight for PHP blocks" (9bf3ecbec)</a>
  
</div>


  <div class="license">
    This article is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
  </div>
</footer>

        
        </div>
        

      </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1627507037"></script>
    <script src="/js/perfect-scrollbar.min.js?1627507037"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1627507037"></script>
    <script src="/js/jquery.sticky.js?1627507037"></script>
    <script src="/js/featherlight.min.js?1627507037"></script>
    <script src="/js/html5shiv-printshiv.min.js?1627507037"></script>
    <script src="/js/modernizr.custom-3.6.0.js?1627507037"></script>
    <script src="/js/learn.js?1627507037"></script>
    <script src="/js/hugo-learn.js?1627507037"></script>
    
    <script src="/main.js?1627507037"></script>
    <link href="/mermaid/mermaid.css?1627507037" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1627507037"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-2753771-44', 'auto');
	
	ga('send', 'pageview');
}
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: 'e5a3a32dad46a5aaaa771b2b37d7084a',
indexName: 'prestashop',
inputSelector: '#search-by',
debug: false
});
</script>

  </body>
</html>


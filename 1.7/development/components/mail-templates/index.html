<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.82.0" />
    <meta name="description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta name="twitter:image" content="https://devdocs.prestashop.com/images/social-cover.jpg" />
<meta name="twitter:site" content="@prestashop" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="The Mail Template component" />
<meta name="twitter:description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta property="og:image" content="https://devdocs.prestashop.com/images/social-cover.jpg" />
<meta property="og:site_name" content="PrestaShop" />
<meta property="og:title" content="The Mail Template component" />
<meta property="og:description" content="Learn how to extend, modify and test PrestaShop, create modules, themes, and more.">
<meta name="author" content="PrestaShop">

    <link rel="icon" href="/images/preston-logo@2x.png" type="image/png">

    <title>The Mail Template component :: PrestaShop Developer Documentation</title>

    
    <link href="/css/font-awesome.min.css?1627507037" rel="stylesheet">
    <link href="/css/syntax-github.css?1627507037" rel="stylesheet">
    <link href="/css/featherlight.min.css?1627507037" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1627507037" rel="stylesheet">
    <link href="/css/auto-complete.css?1627507037" rel="stylesheet">
    
    <link href="/style.css?1627507037" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700" rel="stylesheet">

    <script src="/js/jquery-3.3.1.min.js?1627507037"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

  </head>
  <body class="" data-url="/1.7/development/components/mail-templates/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">PrestaShop DevDocs</a>

    </div>
    
        <div class="searchbox-extended">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input id="search-by" type="search" placeholder="Search...">
</div>


    
  </div>

    <div class="highlightable">
    <ul class="topics">

      
        
      
    </ul>

    
    

    
    <section id="footer">
      <p><a href="https://github.com/PrestaShop/PrestaShop/"><i class="fa fa-github" aria-hidden="true"></i> PrestaShop on GitHub</a></p>
<p><a href="https://github.com/PrestaShop/PrestaShop/issues"><i class="fa fa-bug" aria-hidden="true"></i> Report a bug</a></p>
<p><a href="https://www.prestashop-project.org/slack/readme/"><i class="fa fa-comment" aria-hidden="true"></i> Join us on Slack</a></p>

    </section>
  </div>
</nav>





      <section id="body">
      <div id="overlay"></div>
      <div class="padding highlightable">
        
<div>
  <div id="top-bar">
    
      
      
      
      <div id="top-github-link">
        <a class="github-link" title='Improve this page' href="https://github.com/PrestaShop/docs/edit/master/src/content/1.7/development/components/mail-templates/_index.md" target="blank">
          <i class="fa fa-pencil"></i>
          <span id="top-github-link-text">Improve this page</span>
        </a>
        <a class="how-to-improve" href="/1.7/contribute/documentation/how/">
          <i class="fa fa-question-circle"></i>
          <span>How</span>
        </a>
      </div>
      
    
    <div id="breadcrumbs" itemscope="" itemtype="http://schema.org/breadcrumb">
      <span id="sidebar-toggle-span">
        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
          <i class="fa fa-bars"></i>
        </a>
      </span>
      <span class="links">
        
            
            
              
              
            
            
              
              
            
            
              
              
            
            
              
              
            
            
              <a href='/'>Home</a> > <a href='/1.7/'>PrestaShop 1.7</a> > <a href='/1.7/development/'>Core Reference</a> > <a href='/1.7/development/components/'>Components</a> > Mail Templates
            
          
            
          
            
          
            
          
            
          
      </span>
    </div>
  </div>
</div>




        

        
        
          
            <div id="toc">
  <div class="wrapper">
    <div id="toc-title">Table of Contents</div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#the-mail-template-component">The Mail Template component</a>
      <ul>
        <li><a href="#introduction">Introduction</a>
          <ul>
            <li><a href="#vocabulary">Vocabulary</a></li>
          </ul>
        </li>
        <li><a href="#architecture">Architecture</a>
          <ul>
            <li><a href="#folder-structure">Folder structure</a></li>
            <li><a href="#themes-and-layouts">Themes and Layouts</a></li>
            <li><a href="#generation-workflow">Generation workflow</a></li>
            <li><a href="#available-hooks">Available hooks</a></li>
            <li><a href="#template-variables">Template variables</a></li>
          </ul>
        </li>
        <li><a href="#translation">Translation</a></li>
        <li><a href="#templates-generation">Templates generation</a>
          <ul>
            <li><a href="#automatic-generation">Automatic generation</a></li>
            <li><a href="#manual-generation">Manual generation</a></li>
          </ul>
        </li>
        <li><a href="#choosing-the-default-theme">Choosing the default theme</a>
          <ul>
            <li><a href="#troubleshooting">Troubleshooting</a>
              <ul>
                <li></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#learn-more">Learn more</a>
          <ul>
            <li><a href="#reference">Reference</a></li>
            <li><a href="#module-tutorials">Module Tutorials</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>

    <div id="navigation">
  
  

  

  
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
        
      
      
      
      
        
      
      

      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
          
          
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
        
      
      

      
        
    
    
      
        
      
      
      
      
      

      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
        
    
    
      
        
      
      
      
      
      

      
    
  
      
    
  
      
    
  
      
    
  

  
  
  <a class="nav nav-next" href="/1.7/development/components/position-updater/" title="The Position Updater component" style="margin-right: 0px;">
    <i class="fa fa-chevron-right"></i>
    Next article
  </a>
  
</div>

  </div>
</div>

          
        

        <div id="body-inner">

          




<h1 id="the-mail-template-component">The Mail Template component</h1>

<div class="magic-version-pill" data-version="1.7.6" data-title="New in PrestaShop 1.7.6"></div>


<h2 id="introduction">Introduction</h2>
<p>PrestaShop&rsquo;s email notification system is based on static template files, one for each kind of message (like account creation, order confirmation, etc), which are stored in the <code>mails</code> folder. In order to localize these messages, PrestaShop needs a copy of each template, translated to every supported language. Shops download these translated versions when installing a new language pack.</p>
<p>This system has a few drawbacks. Shops need to download email packs every time a new language is installed,
and if a template had not been translated to that language, you ended up with emails in English. This gets even more complicated when you use an email theme (from Addons or a freelance designer) which is therefore limited to the languages the authors translated by themselves. Also, any customization performed in a template has to be replicated for every installed language.</p>
<p>Starting on 1.7.6, this feature has been significantly revamped. To avoid introducing breaking changes, the system still relies on static email templates, which are used by the <code>Mail::send</code> method. However, instead of downloading translated copies of each template, these files are now dynamically generated whenever you install a new language, using base templates, or <em>layouts</em>.</p>
<p>This is the first step to improving the email system in PrestaShop. As the feature gets further improved we will add more advanced customization for email templates.</p>
<h3 id="vocabulary">Vocabulary</h3>
<p>Terms like &ldquo;layouts&rdquo;, &ldquo;templates&rdquo; and &ldquo;themes&rdquo; can be confusing, so let&rsquo;s clarify them:</p>
<ul>
<li>
<p><strong>Mail themes</strong> are groups of <strong>Layouts</strong> with a given style, stored in the <code>mails/themes/</code> directory.</p>
<p>You can have many mail themes installed, but only one active at a time.</p>
</li>
<li>
<p><strong>Layouts</strong> are files that will be <strong>rendered</strong> using Twig to generate ready-to-use mail <strong>Templates</strong>.</p>
<p>They can use logic statements, translate wordings, extend other base layouts or include components. They are the basic files that make up your <strong>Mail theme</strong>.</p>
</li>
<li>
<p><strong>Templates</strong> are static, translated files (html or txt) that will be <strong>generated</strong> by <code>MailThemeGenerator</code> from <strong>Layouts</strong> of a given <strong>Mail theme</strong> in a given language.</p>
<p>They contain no logic and are translated for <strong>ONE</strong> language. These are the files used by the <code>Mail</code> class when you send a mail and are located in the <code>mails/</code> directory, grouped by language (<code>mails/en/</code>, <code>mails/fr/</code>, &hellip;).</p>
</li>
</ul>
<h2 id="architecture">Architecture</h2>
<h3 id="folder-structure">Folder structure</h3>
<p>The new email themes layout files are stored in the <code>mails/themes/</code> folder. PrestaShop 1.7.6 is bundled with two email themes:</p>
<ul>
<li><strong>classic</strong>  The default email theme that was bundled with PrestaShop up until the 1.7.5 version.</li>
<li><strong>modern</strong>  A new email theme with a modern, responsive design.</li>
</ul>
<p>Each of these folder contains twig layouts which are organized in a conventional way:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">...
 mails
<span class="p">|</span>    themes
<span class="p">|</span>   <span class="p">|</span>    modern
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    assets                          <span class="c1"># Contains the assets used in your layouts (optional)</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    components                      <span class="c1"># Contains block parts or base layouts for your email theme (optional)</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    footer.html.twig
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    layout.html.twig
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    core                            <span class="c1"># Contains layouts for Core transactional mails</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    account.html.twig           <span class="c1"># HTML layout for &#34;account&#34; transactional mail</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    account.txt.twig            <span class="c1"># TXT layout for &#34;account&#34; transactional mail</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    bankwire.html.twig          <span class="c1"># HTML layout for &#34;bankwire&#34; transactional mail</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    cheque.txt.twig             <span class="c1"># TXT layout for &#34;cheque&#34; transactional mail</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    contact.html.twig           <span class="c1"># HTML layout for &#34;contact&#34; transactional mail</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    modules                         <span class="c1"># Contains layouts specific to a given module</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    followup                    <span class="c1"># Module name</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    followup_1.html.twig
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    followup_2.html.twig
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    ps_emailalerts              <span class="c1"># Module name</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    new_order.html.twig
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>    followup_2.html.twig
...
</code></pre></div><p>As you can see there are two types of layouts, one for each type of template:</p>
<ul>
<li><strong>HTML</strong> layouts, which generate HTML templates and can contain tags for attractive design, images, links, etc.</li>
<li><strong>TXT</strong> layouts, which only contain plain text, used for old email clients or non interactive environments.</li>
</ul>
<p>The layout name should respect the following convention: <code>{layout_name}.{layout_type}.twig</code></p>
<p>For example:</p>
<ul>
<li><code>account.html.twig</code> : layout for the <code>account</code> mail template in its <code>html</code> version</li>
<li><code>cheque.txt.twig</code> : layout for the <code>cheque</code> mail template in its <code>txt</code> version</li>
</ul>
<p>As you may have noticed, some of our layouts have both types (e.g.: <code>account</code>) whereas others only have html or txt type (<code>bankwire</code>, <code>cheque</code>, &hellip;).
This is because you are not forced to define both types as they will be used as a fallback for each other:</p>
<ul>
<li>If only the <strong>html</strong> type is available, the same layout will be stripped of html tags and the resulting plain text will be used as your <strong>txt</strong> layout.</li>
<li>If only the <strong>txt</strong> type is available, the same layout will be used for <strong>html</strong> layout (but it won&rsquo;t have images nor any other rich elements).</li>
</ul>

<div class="notices note" >Thanks to this fallback system, and since we mostly want rich HTML emails, most email themes will only contain html layouts, and txt layouts will be automatically generated from them.</div>

<h3 id="themes-and-layouts">Themes and Layouts</h3>
<p>PrestaShop uses objects to manipulate email themes and layouts, they implement the following interfaces:</p>
<ul>
<li><code>PrestaShop\PrestaShop\Core\MailTemplate\ThemeInterface</code>  Describes a theme and provides a list of its layouts</li>
<li><code>PrestaShop\PrestaShop\Core\MailTemplate\Layout\LayoutInterface</code>  Describes a theme layout (name, file paths, related module&hellip;)</li>
</ul>
<p>These interfaces have a corresponding collection that is used in the core services and provided via hooks:</p>
<ul>
<li><code>PrestaShop\PrestaShop\Core\MailTemplate\ThemeCollectionInterface</code></li>
<li><code>PrestaShop\PrestaShop\Core\MailTemplate\Layout\LayoutCollectionInterface</code></li>
</ul>
<p>Of course, PrestaShop provides concrete implementations which you are encouraged to reuse:</p>
<ul>
<li><code>PrestaShop\PrestaShop\Core\MailTemplate\Theme</code></li>
<li><code>PrestaShop\PrestaShop\Core\MailTemplate\ThemeCollection</code></li>
<li><code>PrestaShop\PrestaShop\Core\MailTemplate\Layout\Layout</code></li>
<li><code>PrestaShop\PrestaShop\Core\MailTemplate\Layout\LayoutCollection</code></li>
</ul>
<h3 id="generation-workflow">Generation workflow</h3>
<p>The templates from layouts generation workflow is a bit complex, here are the main components:</p>
<ul>
<li><strong>GenerateThemeMailTemplatesCommand</strong> describes the generation settings (eg. which theme are we generating and in which language).</li>
<li><strong>GenerateThemeMailTemplatesCommandHandler</strong> is the command bus handler in charge of executing the generation using the configured <code>MailTemplateGenerator</code>.</li>
<li><strong>FolderThemeCatalog</strong> provides a <code>ThemeCollection</code>, which is built by scanning mail themes in folders.</li>
<li><strong>MailTemplateGenerator</strong> drives the generation of a <code>ThemeInterface</code> for the requested <code>LanguageInterface</code>.</li>
<li><strong>MailTemplateTwigRenderer</strong> actually renders the layout using the Twig renderer, and post-processes the result by applying any existing <code>TransformationInterface</code>.</li>
<li><strong>LayoutVariablesBuilder</strong> provides variables to be used in the Twig layouts.</li>
</ul>
<figure>
    <img src="./img/email_generation_workflow.svg"/> <figcaption>
            <h4>Email Generation Workflow (it is advised to open it in another tab as the image is quite big)</h4>
        </figcaption>
</figure>


<div class="notices note" >You can update this schema using the <a href="/schemas/1.7/email_generation_workflow.xml">source XML file</a> importable in services like <a href="https://draw.io">draw.io</a>.</div>

<h3 id="available-hooks">Available hooks</h3>
<p>As you can see in the workflow, the email generation process includes a few hooks that allow you to include your own themes, layouts, variables and transformations:</p>
<ul>
<li><strong>actionListMailThemes</strong> allows you to modify the <code>ThemeCollection</code> (add, remove, modify a theme or/and its layouts)</li>
<li><strong>actionBuildMailLayoutVariables</strong> allows you to modify the variables of a specific layout</li>
<li><strong>actionGetMailLayoutTransformations</strong> allows you to modify the transformations applied to a specific layout</li>
</ul>
<h3 id="template-variables">Template variables</h3>

<div class="notices warning" ><p><strong>Layout variables are NOT template variables</strong></p>
<p>Always keep in mind that the variables provided by the <code>LayoutVariablesBuilder</code> will only be available during template <strong>generation</strong>, meaning that their value will be fixed into the exported static templates, and won&rsquo;t change dynamically when your emails are being sent. They should not be confused with <em>template variables</em> (like firstname,
lastname, &hellip;) which are replaced at the last moment when the email is sent by the <code>Mail::send</code> function.</p>
</div>

<p>Here is a quick resume of the differences:</p>
<table>
<thead>
<tr>
<th></th>
<th style="text-align:left">Layout</th>
<th style="text-align:left">Template</th>
</tr>
</thead>
<tbody>
<tr>
<td>Renderer</td>
<td style="text-align:left">Twig</td>
<td style="text-align:left">Swift_Plugins_DecoratorPlugin</td>
</tr>
<tr>
<td>Syntax</td>
<td style="text-align:left"><code>{{ variable }}</code></td>
<td style="text-align:left"><code>{ variable }</code></td>
</tr>
<tr>
<td>Interpreted</td>
<td style="text-align:left">On generation</td>
<td style="text-align:left">When the email is being sent</td>
</tr>
<tr>
<td>Target</td>
<td style="text-align:left">All users/customers</td>
<td style="text-align:left">Specific user/action</td>
</tr>
<tr>
<td>Use cases</td>
<td style="text-align:left">Design, translations, &hellip;</td>
<td style="text-align:left">Customization (user, order, &hellip;)</td>
</tr>
</tbody>
</table>

<div class="notices note" >On the same principle, you can add Twig logic in your templates, like conditions on email types, or even your own
layout variables to deal with customization  but it will only be useful during email generation. So don&rsquo;t use any Twig
logic to adapt the templates for a specific user or order.</div>

<h2 id="translation">Translation</h2>
<p>One of the main advantages of email generation is the possibility to use translations in the layouts, here is an example:</p>
<div class="highlight"><pre class="chroma"><code class="language-twig" data-lang="twig"><span class="x">  &lt;table width=&#34;100%&#34;&gt;
</span><span class="x">    &lt;tr&gt;
</span><span class="x">      &lt;td align=&#34;center&#34; class=&#34;titleblock&#34;&gt;
</span><span class="x">        &lt;font size=&#34;2&#34; face=&#34;Open-sans, sans-serif&#34; color=&#34;#555454&#34;&gt;
</span><span class="x">          &lt;span class=&#34;title&#34;&gt;</span><span class="cp">{{</span> <span class="s1">&#39;This is a translated string&#39;</span><span class="o">|</span><span class="nf">trans</span><span class="o">({},</span> <span class="s1">&#39;EmailsBody&#39;</span><span class="o">,</span> <span class="nv">locale</span><span class="o">)|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="x">&lt;/span&gt;
</span><span class="x">        &lt;/font&gt;
</span><span class="x">      &lt;/td&gt;
</span><span class="x">    &lt;/tr&gt;
</span><span class="x">  &lt;/table&gt;
</span></code></pre></div><h2 id="templates-generation">Templates generation</h2>
<h3 id="automatic-generation">Automatic generation</h3>
<p>So now that you know how the generation process works, you might wonder <strong>when</strong> exactly does it happen? There are a few cases when generation is <strong>automatic</strong>:</p>
<ul>
<li>In <code>Language</code> class and more particularly during the calls to <code>Language::downloadAndInstallLanguagePack</code>, <code>Language::installLanguagePack</code> and of course <code>Language::installEmailsLanguagePack</code> which is now <strong>deprecated</strong></li>
<li>In <code>PrestaShopBundle\Install\Upgrade::run</code> when languages are updated</li>
</ul>
<h3 id="manual-generation">Manual generation</h3>
<p>Of course sometimes you still want to manually generate your emails (new theme installed, changes in some layouts, &hellip;), then you can use:</p>
<ul>
<li>In the Symfony command <code>prestashop:mail:generate</code> if you want to launch a CLI generation</li>
<li>In the &ldquo;Design &gt; Email Theme&rdquo; page when you use the form to launch the generation manually (once per language)</li>
</ul>
<h2 id="choosing-the-default-theme">Choosing the default theme</h2>
<p>Your shop can only use one theme at a time, so if you go to the &ldquo;Design &gt; Email Theme&rdquo; page you will be able to choose your default email theme.
This default theme will be used each time the generation process is launched automatically (language installation, upgrade, &hellip;).</p>
<p>The default theme starting from <code>1.7.6</code> will be the <strong>modern</strong> theme, the <em>classic</em> theme was provided for backward compatibility and as an example.</p>
<h3 id="troubleshooting">Troubleshooting</h3>
<h5 id="i-changed-my-default-theme-but-my-emails-didnt-change">I changed my default theme but my emails didn&rsquo;t change.</h5>
<p>Indeed when you select your default theme you simply update your configuration, so any <strong>future</strong> generation will use the theme you selected.</p>
<p>However no generation process is launched when you select a theme, so if you want to generate your emails with your newly selected theme you need to do it manually in the &ldquo;Generate emails&rdquo; form.</p>

<div class="notices info" >The form only generates <strong>one</strong> language, so you will have to repeat the action for each Language installed on your shop.</div>

<h5 id="i-tried-to-generate-emails-with-a-new-theme-but-my-templates-are-still-in-the-previous-one">I tried to generate emails with a new theme, but my templates are still in the previous one.</h5>
<p>There are two possibilities for this issue:</p>
<p><strong>1. Overwrite already-generated templates</strong></p>
<p>As you may have noticed, the <code>GenerateThemeMailTemplatesCommand</code> and the &ldquo;Generate emails&rdquo; form have an <strong>overwrite</strong> option. We need this option because some shops may have installed email themes, or customized their templates manually. For that reason by default the generation process <strong>does not export a template if it already exists</strong>.
If you want to replace the former templates you need to enable the <code>overwrite</code> option.</p>
<p><img src="./img/overwrite_templates.png" alt="Overwrite templates option"></p>

<div class="notices warning" >Be careful, using this option will replace <strong>all the existing templates</strong>!</div>

<p><strong>2. Overwrite the shop theme&rsquo;s mail templates</strong></p>
<p>As you may know, your PrestaShop theme (the <strong>shop&rsquo;s theme</strong>, not the email theme) can include mail templates which override the shop&rsquo;s default ones. Those templates are not contained in the default <code>mails</code> folder, but the in <code>themes/{my_theme}/mails/</code> folder. Even if you generate your new mail theme (be it automatically or manually), the shop theme&rsquo;s templates will have higher priority and will be used instead of your mail theme&rsquo;s.</p>
<p>In that case, generate your mail theme manually and to select the shop theme you want to overwrite. Templates will be generated in its folder and will be used from now (don&rsquo;t forget to enable the <code>overwrite</code> option if you want to replace them).</p>
<p><img src="./img/select_shop_theme.png" alt="Select the theme you want to overwrite"></p>

<div class="notices warning" >Be aware this operation will <strong>permanently modify</strong> your shop theme&rsquo;s files!</div>

<h2 id="learn-more">Learn more</h2>
<h3 id="reference">Reference</h3>
<ul>
<li>Here is an <a href="https://github.com/PrestaShop/example-modules/tree/master/example_module_mailtheme">example module</a> showing how to integrate with the email generation workflow</li>
</ul>
<h3 id="module-tutorials">Module Tutorials</h3>
<ul>
<li><a href="/1.7/modules/concepts/mail-templates/extend-a-layout-from-module/">How to extend a layout in a theme from a module</a></li>
<li><a href="/1.7/modules/concepts/mail-templates/add-a-layout-from-module/">How to add a layout in a theme from a module</a></li>
<li><a href="/1.7/modules/concepts/mail-templates/add-a-theme-from-module/">How to add an email theme from a module</a></li>
<li><a href="/1.7/modules/concepts/mail-templates/add-layout-variables-from-module/">How to add layout variables from a module</a></li>
<li><a href="/1.7/modules/concepts/mail-templates/apply-transformation-from-module/">How to apply a transformation from a module</a></li>
</ul>




<footer class="article-footer">
  
<div>
  Last updated on February 19, 2021
  :
  <a href="https://github.com/PrestaShop/docs/commit/e217e199e870e39bd67a815cc9581448f844163c">"Changed the link to the example module for the mail theme" (e217e199e)</a>
  
</div>


  <div class="license">
    This article is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
  </div>
</footer>

        
        </div>
        

      </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1627507037"></script>
    <script src="/js/perfect-scrollbar.min.js?1627507037"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1627507037"></script>
    <script src="/js/jquery.sticky.js?1627507037"></script>
    <script src="/js/featherlight.min.js?1627507037"></script>
    <script src="/js/html5shiv-printshiv.min.js?1627507037"></script>
    <script src="/js/modernizr.custom-3.6.0.js?1627507037"></script>
    <script src="/js/learn.js?1627507037"></script>
    <script src="/js/hugo-learn.js?1627507037"></script>
    
    <script src="/main.js?1627507037"></script>
    <link href="/mermaid/mermaid.css?1627507037" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1627507037"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-2753771-44', 'auto');
	
	ga('send', 'pageview');
}
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: 'e5a3a32dad46a5aaaa771b2b37d7084a',
indexName: 'prestashop',
inputSelector: '#search-by',
debug: false
});
</script>

  </body>
</html>

